version: '3'
services:
  react-app:
    build:
      context: ./app/client
      args:
        - VITE_API_URL=http://localhost:5050 
    ports:
      - "80:80"  # Exposes port 80 in the container to port 80 on the host
    networks:
      - app-network

  nodejs-api:
    build:
      context: ./app/server
    ports:
      - "5050:5050"  # Exposes port 5050 in the container to port 5050 on the host
    networks:
      - app-network
    environment:
      - ATLAS_URI=mongodb+srv://admin:q124jdR1q7Rgpd5N@clusterdb-mern-1.xrdxz.mongodb.net/?retryWrites=true&w=majority&appName=ClusterDB-MERN-1

networks:
  app-network:
    driver: bridge
